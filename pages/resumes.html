{% extends "partials/base.html" %}
{% block title %}My Resumes - ResumeMatch{% endblock %}

{% block content %}
<section class="dashboard-header">
    <div class="container">
    
    </div>
</section>

<section class="dashboard-content">
    <div class="container">
        <!-- Resume Grid -->
        <div class="dashboard-section">
            <div class="section-header">
                <h2>Your Resumes ({{ resumes|length }})</h2>
                <div class="section-actions">
                    <div class="search-box">
                        <input type="text" placeholder="Search resumes..." id="resume-search">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
            </div>

            {% if resumes %}
            <div class="resume-grid">
                {% for resume in resumes %}
                <div class="resume-card" data-resume-id="{{ resume.id }}">
                    <div class="resume-preview">
                        <div class="resume-thumbnail">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="resume-actions">
                            <span class="resume-action disabled" title="Edit Resume (Coming Soon)">
                                <i class="fas fa-edit"></i>
                            </span>
                            <span class="resume-action disabled" title="Preview (Coming Soon)">
                                <i class="fas fa-eye"></i>
                            </span>
                            <span class="resume-action disabled" title="Download PDF (Coming Soon)">
                                <i class="fas fa-download"></i>
                            </span>
                        </div>
                    </div>
                    
                    <div class="resume-info">
                        <h3 class="resume-title">{{ resume.display_title }}</h3>
                        <div class="resume-meta">
                            <span class="resume-company">{{ resume.display_company }}</span>
                            <span class="resume-date">{{ resume.updated_at.strftime('%b %d, %Y') }}</span>
                        </div>
                        
                        <!-- Completeness Score -->
                        <div class="completeness-score">
                            <div class="score-label">Completeness</div>
                            <div class="score-bar">
                                <div class="score-fill" style="width: {{ resume.completeness_score }}%"></div>
                            </div>
                            <div class="score-value">{{ resume.completeness_score }}%</div>
                        </div>

                        <!-- Optimization Status -->
                        {% if resume.is_optimized %}
                            <div class="optimization-status optimized">
                                <i class="fas fa-check-circle"></i>
                                <span>AI Optimized</span>
                            </div>
                        {% else %}
                            <div class="optimization-status not-optimized">
                                <i class="fas fa-exclamation-circle"></i>
                                <span>Not Optimized</span>
                            </div>
                        {% endif %}

                        <div class="resume-card-actions">
                            <a href="{{ url_for('optimizer.show_results',result_id=resume.id) }}" 
                               class="btn btn-sm btn-primary">
                                <i class="fas fa-robot"></i> View Resume
                            </a>
                            <span class="btn btn-sm btn-outline" disabled>
                                <i class="fas fa-trash"></i> Delete (Soon)
                            </span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <!-- Empty State -->
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h2>No Resumes Yet</h2>
                <p>Start building your professional resume with our AI-powered tools.</p>
                <div class="empty-actions">
                    <span class="btn btn-outline btn-large" disabled>
                        <i class="fas fa-plus"></i> Create Your First Resume (Coming Soon)
                    </span>
                    <a href="{{ url_for('template.get_templates') }}" class="btn btn-primary btn-large">
                        <i class="fas fa-palette"></i> Browse Templates
                    </a>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/resumes.css') }}">
{% endblock %}


{% block extra_js %}
<script>
// Resume search functionality
document.getElementById('resume-search').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    const resumeCards = document.querySelectorAll('.resume-card');
    
    resumeCards.forEach(card => {
        const title = card.querySelector('.resume-title').textContent.toLowerCase();
        const company = card.querySelector('.resume-company').textContent.toLowerCase();
        
        if (title.includes(searchTerm) || company.includes(searchTerm)) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
});

// Add loading animation to score bars on page load
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
        const scoreFills = document.querySelectorAll('.score-fill');
        scoreFills.forEach(fill => {
            const width = fill.style.width;
            fill.style.width = '0%';
            setTimeout(() => {
                fill.style.width = width;
            }, 100);
        });
    }, 300);
});
</script>
{% endblock %}